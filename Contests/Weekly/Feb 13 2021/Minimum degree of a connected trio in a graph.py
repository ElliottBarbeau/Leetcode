'''
I attempted this question without much knowledge or background in graphs - I'm wondering how it could be further optimized. 1 <= n <= 400 for this question,
and my solution timed out at n = 400, while passing all other test cases. I'm trying to find small optimization that I could've made
in order to pass the test cases.
'''
import collections
class Solution:
    def minTrioDegree(self, n: int, edges) -> int:
        g = collections.defaultdict(set)

        for (a, b) in edges:
            g[a].add(b)
            g[b].add(a)
        
        minimum_so_far = float('inf')
        for n in g:
            for m in g[n]:
                for o in g[n] & g[m]:
                    minimum_so_far = min(minimum_so_far, len(g[n]) + len(g[m]) + len(g[o])-6)
                    
        return minimum_so_far if minimum_so_far != float('inf') else -1

n = 7
edges = [[1,3],[4,1],[4,3],[2,5],[5,6],[6,7],[7,5],[2,6]]
print(Solution().minTrioDegree(n, edges))

n = 3
edges = [[3, 2], [2, 1]]
print(Solution().minTrioDegree(n, edges))

n = 5
edges = [[5,2],[4,1],[4,2],[1,5]]
print(Solution().minTrioDegree(n, edges))

n = 6
edges = [[6,5],[4,3],[5,1],[1,4],[2,3],[4,5],[2,6],[1,3]]
print(Solution().minTrioDegree(n, edges))

n = 17
edges = [[12,10],[12,16],[4,9],[4,6],[14,1],[9,2],[17,6],[17,12],[8,9],[11,14],[13,5],[8,15],[13,11],[15,11],[15,14],[6,8],[12,15],[14,12],[9,1],[9,10],[10,5],[1,11],[2,10],[15,1],[7,9],[14,2],[4,1],[17,7],[3,17],[8,1],[17,13],[10,13],[8,13],[1,7],[2,6],[13,6],[7,2],[1,16],[6,3],[6,9],[16,17],[7,14]]
print(Solution().minTrioDegree(n, edges))

n = 354
edges = [[283,339],[266,268],[27,233],[193,27],[113,282],[252,351],[241,211],[185,32],[194,99],[166,28],[214,77],[142,354],[178,11],[330,145],[51,226],[95,22],[278,116],[317,44],[264,190],[297,224],[133,143],[270,130],[28,188],[55,205],[129,11],[37,264],[73,348],[148,24],[232,94],[341,10],[147,306],[168,100],[252,81],[74,340],[247,21],[117,140],[152,259],[111,78],[135,197],[20,207],[157,203],[277,119],[33,15],[42,91],[47,169],[278,349],[54,65],[1,220],[246,6],[143,322],[165,179],[293,337],[222,57],[305,348],[240,102],[3,37],[55,38],[195,198],[63,177],[70,36],[1,67],[330,23],[154,26],[96,341],[90,270],[70,301],[335,119],[131,42],[222,160],[274,198],[257,38],[1,350],[152,92],[38,116],[104,61],[159,24],[239,352],[249,146],[245,194],[88,238],[327,245],[20,94],[318,264],[339,219],[149,315],[320,215],[68,250],[4,104],[316,83],[3,288],[121,271],[189,149],[198,216],[287,303],[319,97],[174,246],[236,90],[103,204],[273,139],[137,215],[121,109],[343,82],[146,53],[135,16],[82,288],[63,293],[216,108],[333,126],[64,239],[319,200],[187,328],[354,78],[281,344],[340,3],[304,257],[36,177],[128,22],[86,16],[263,76],[156,340],[177,134],[283,292],[31,89],[172,28],[347,75],[155,152],[86,281],[28,20],[118,84],[184,295],[304,122],[342,225],[331,57],[157,170],[282,192],[323,202],[169,144],[266,333],[112,284],[124,258],[113,118],[330,125],[296,221],[125,92],[210,41],[25,14],[174,106],[354,73],[34,230],[16,194],[328,173],[97,2],[248,162],[166,120],[252,34],[199,315],[32,49],[295,112],[307,77],[163,240],[187,170],[302,309],[267,288],[50,192],[296,95],[204,259],[347,317],[290,173],[101,8],[88,75],[317,136],[202,60],[53,117],[316,91],[233,322],[255,170],[311,232],[201,208],[121,99],[200,154],[320,70],[206,48],[87,195],[150,144],[135,244],[260,28],[177,259],[24,166],[269,342],[127,249],[125,78],[43,188],[67,155],[174,92],[352,129],[225,174],[210,283],[238,122],[100,179],[93,292],[340,11],[317,284],[221,60],[187,156],[234,277],[300,222],[147,92],[15,220],[343,13],[306,265],[230,145],[217,26],[15,229],[264,21],[244,61],[246,80],[55,274],[80,29],[265,102],[141,54],[320,56],[130,152],[146,267],[328,307],[340,132],[1,150],[286,161],[41,232],[90,106],[79,106],[201,230],[4,201],[351,147],[302,7],[71,111],[351,156],[66,5],[2,240],[103,54],[139,227],[279,149],[308,185],[149,277],[41,106],[61,173],[114,328],[107,51],[293,141],[184,271],[307,323],[173,5],[34,323],[348,104],[251,199],[15,62],[246,111],[175,298],[123,260],[230,243],[83,233],[300,329],[129,349],[210,17],[216,326],[56,197],[274,20],[119,155],[140,187],[39,293],[224,28],[125,333],[266,183],[117,240],[175,172],[114,305],[318,248],[292,348],[79,204],[96,46],[153,260],[328,23],[173,238],[225,276],[292,186],[5,254],[113,53],[183,50],[145,185],[90,69],[272,244],[332,20],[18,309],[293,10],[73,16],[214,293],[268,93],[250,332],[272,91],[167,65],[304,61],[98,203],[69,167],[215,221],[13,263],[264,244],[200,89],[262,180],[180,138],[66,116],[100,276],[32,132],[314,208],[184,117],[291,63],[68,323],[325,214],[55,124],[284,222],[321,271],[19,49],[162,345],[151,168],[168,10],[41,55],[111,141],[11,292],[240,35],[3,208],[66,246],[103,295],[303,320],[335,25],[155,342],[202,8],[344,348],[239,155],[86,80],[5,244],[182,313],[112,236],[72,163],[284,190],[290,233],[129,325],[230,237],[202,129],[36,344],[28,102],[136,202],[234,207],[296,191],[154,107],[237,123],[197,50],[204,193],[353,145],[170,51],[333,185],[93,87],[8,147],[12,108],[127,345],[321,207],[51,117],[159,154],[229,240],[132,60],[246,320],[269,294],[218,221],[257,60],[256,104],[11,264],[70,350],[228,271],[223,165],[19,286],[102,302],[293,269],[137,278],[215,179],[3,198],[230,97],[156,111],[44,68],[336,316],[203,52],[282,354],[262,147],[212,286],[234,332],[329,313],[265,319],[113,51],[304,158],[76,114],[243,151],[148,130],[310,52],[162,65],[177,35],[290,250],[238,60],[131,86],[340,178],[232,236],[169,198],[29,313],[123,329],[106,258],[45,1],[284,274],[112,338],[136,39],[342,144],[271,102],[135,330],[348,47],[309,214],[288,280],[347,79],[92,216],[7,1],[139,309],[98,39],[187,215],[58,241],[206,228],[175,259],[327,109],[133,15],[178,166],[211,163],[352,300],[85,185],[161,342],[102,256],[340,155],[268,59],[251,263],[162,325],[339,348],[86,177],[18,122],[43,206],[9,330],[75,275],[241,298],[175,133],[286,220],[198,107],[34,14],[123,342],[116,65],[271,88],[288,19],[16,216],[302,66],[285,233],[164,123],[342,148],[196,192],[106,100],[203,51],[244,241],[30,132],[245,215],[103,122],[275,314],[151,31],[169,76],[203,316],[62,197],[350,115],[252,348],[259,244],[279,73],[48,42],[100,80],[263,205],[308,118],[164,244],[310,298],[221,208],[199,40],[287,162],[270,91],[36,162],[221,235],[75,279],[70,173],[172,193],[124,293],[206,344],[165,154],[344,296],[198,331],[117,263],[240,77],[145,114],[326,135],[20,101],[147,294],[112,184],[255,102],[181,27],[4,102],[256,48],[173,279],[176,223],[286,345],[171,117],[227,277],[230,23],[84,216],[328,338],[220,247],[81,52],[9,320],[69,96],[312,330],[72,241],[191,40],[74,296],[66,54],[192,279],[149,317],[159,111],[347,320],[58,217],[243,342],[170,138],[22,114],[83,228],[333,272],[99,352],[277,340],[257,44],[185,275],[255,209],[25,3],[156,59],[116,261],[136,1],[25,12],[63,115],[354,71],[174,113],[182,215],[117,6],[170,268],[59,1],[140,236],[301,190],[105,126],[221,319],[330,235],[245,20],[90,235],[26,232],[96,77],[234,118],[88,73],[347,324],[210,160],[153,282],[61,217],[18,246],[214,41],[182,107],[198,33],[223,117],[86,139],[188,7],[55,133],[177,266],[176,60],[329,153],[17,134],[116,256],[13,191],[201,80],[304,65],[136,261],[170,83],[126,58],[106,89],[42,172],[41,118],[267,43],[301,203],[330,239],[298,277],[44,141],[146,9],[202,300],[57,327],[92,294],[75,223],[113,88],[21,252],[57,336],[195,279],[4,181],[232,179],[172,146],[198,284],[259,62],[272,270],[102,78],[24,177],[276,151],[297,183],[293,54],[40,112],[29,112],[354,70],[86,237],[126,44],[277,204],[178,91],[276,7],[41,122],[349,238],[224,314],[351,28],[246,73],[140,73],[108,139],[217,55],[349,76],[221,165],[228,213],[134,295],[196,90],[194,309],[309,296],[67,116],[15,325],[100,311],[258,330],[64,199],[253,224],[268,276],[305,262],[141,321],[353,82],[10,246],[102,329],[129,194],[351,167],[154,138],[164,322],[290,309],[45,231],[52,99],[354,330],[292,346],[224,300],[189,104],[232,322],[270,187],[288,83],[224,318],[336,132],[298,267],[53,338],[288,92],[66,137],[231,344],[98,327],[126,169],[301,296],[325,235],[193,88],[23,13],[225,157],[237,122],[247,343],[148,184],[251,66],[145,286],[291,111],[75,69],[49,169],[83,82],[160,18],[49,178],[100,162],[337,236],[43,27],[33,99],[270,173],[253,340],[35,288],[340,79],[294,121],[117,336],[89,88],[270,11],[172,104],[17,267],[50,26],[209,199],[238,235],[146,259],[24,144],[31,3],[9,101],[281,56],[76,163],[77,128],[202,150],[180,248],[93,252],[220,293],[14,197],[315,36],[129,193],[315,54],[230,343],[224,272],[261,83],[304,54],[352,192],[53,292],[170,310],[194,2],[307,297],[193,186],[310,195],[89,245],[170,81],[298,248],[305,144],[202,33],[152,14],[253,344],[145,164],[92,18],[69,254],[7,41],[247,288],[124,208],[281,24],[193,51],[98,317],[188,229],[282,7],[251,267],[216,309],[84,10],[245,116],[311,299],[286,233],[135,82],[194,168],[206,133],[263,277],[76,5],[222,239],[166,335],[336,81],[65,14],[258,189],[167,327],[298,243],[273,308],[343,242],[265,304],[283,111],[28,248],[348,329],[69,258],[207,210],[231,338],[322,295],[260,234],[264,335],[120,178],[40,69],[228,278],[115,81],[283,223],[114,265],[238,81],[249,319],[209,292],[124,315],[93,71],[153,220],[227,178],[325,94],[265,52],[329,55],[173,216],[190,296],[318,302],[221,131],[23,146],[192,342],[309,262],[120,335],[250,36],[45,161],[143,40],[11,28],[163,153],[343,349],[295,34],[245,353],[200,211],[186,38],[26,165],[141,152],[120,29],[310,171],[21,343],[265,276],[173,211],[119,240],[269,17]]
print(Solution().minTrioDegree(n, edges))